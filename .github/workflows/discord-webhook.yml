name: Discord Notification
on: [push]

jobs:
  discord-notification:
    runs-on: ubuntu-latest
    steps:
      - name: Discord Notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            â€ 
            ### {{ 
              EVENT_PAYLOAD.head_commit.message.match(/^(feat|fix|docs|style|refactor|test|chore|ci|perf|build|revert)(\(.+\))?:/) ? 
              (
                EVENT_PAYLOAD.head_commit.message.includes('feat') ? 'âœ¨ Nova Funcionalidade' :
                EVENT_PAYLOAD.head_commit.message.includes('fix') ? 'ğŸ› CorreÃ§Ã£o de Bug' :
                EVENT_PAYLOAD.head_commit.message.includes('docs') ? 'ğŸ“š DocumentaÃ§Ã£o' :
                EVENT_PAYLOAD.head_commit.message.includes('style') ? 'ğŸ¨ Ajustes de Estilo' :
                EVENT_PAYLOAD.head_commit.message.includes('refactor') ? 'ğŸ”§ RefatoraÃ§Ã£o' :
                EVENT_PAYLOAD.head_commit.message.includes('test') ? 'ğŸ§ª Testes' :
                EVENT_PAYLOAD.head_commit.message.includes('chore') ? 'ğŸ”¨ ManutenÃ§Ã£o' :
                EVENT_PAYLOAD.head_commit.message.includes('ci') ? 'ğŸ¤– IntegraÃ§Ã£o ContÃ­nua' :
                EVENT_PAYLOAD.head_commit.message.includes('perf') ? 'âš¡ Performance' :
                EVENT_PAYLOAD.head_commit.message.includes('build') ? 'ğŸ—ï¸ Build' :
                EVENT_PAYLOAD.head_commit.message.includes('revert') ? 'â†©ï¸ ReversÃ£o' :
                'ğŸ”„ Outras MudanÃ§as'
              ) : 
              'ğŸ”„ Outras MudanÃ§as' 
            }}
            ### [{{ EVENT_PAYLOAD.head_commit.message.split('\n\n')[0].toUpperCase() }}](https://github.com/{{ EVENT_PAYLOAD.repository.full_name }}/commit/{{ EVENT_PAYLOAD.head_commit.id }})
            {{ EVENT_PAYLOAD.head_commit.message.split('\n\n')[1] || 'Sem descriÃ§Ã£o adicional' }}

            ### Detalhes:
            - RepositÃ³rio: {{ EVENT_PAYLOAD.repository.full_name }}
            - Autor: {{ EVENT_PAYLOAD.sender.login }}
            - Branch: {{ EVENT_PAYLOAD.ref.replace('refs/heads/', '') }}

             `ğŸš€ Changelog â€” {{ 
            new Date(EVENT_PAYLOAD.head_commit.timestamp).toLocaleString('pt-BR', {
              timeZone: 'America/Sao_Paulo',
              day: '2-digit',
              month: 'long',
              year: 'numeric',
            }) }}`
            â€
